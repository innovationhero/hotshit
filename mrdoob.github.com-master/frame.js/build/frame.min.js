// frame.js - http://github.com/mrdoob/frame.js
var FRAME=function(){return{VERSION:1,Module:function(){this.parameters={input:{},output:{}};this.init=function(){};this.load=function(){};this.start=function(){};this.end=function(){};this.update=function(){}},Timeline:function(){var d=[],c=[],f=0,g=0;return{add:function(a){a.module.init();d.push(a);this.sort()},sort:function(){d.sort(function(a,b){return a.start-b.start})},remove:function(a){a=d.indexOf(a);-1!==a&&d.splice(a,1)},update:function(a){for(a<g&&this.reset();d[f];){var b=d[f];if(b.start>
a)break;b.end>a&&(c.push(b),b.module.start((a-b.start)/b.duration));f++}for(var e=0;c[e];)b=c[e],b.end<a?(c.splice(e,1),b.module.end((a-b.start)/b.duration)):e++;c.sort(function(a,b){return a.layer-b.layer});for(var e=0,h=c.length;e<h;e++)b=c[e],b.module.update((a-b.start)/b.duration);g=a},reset:function(){for(;c.length;)c.pop();f=0}}},TimelineElement:function(d,c,f,g,a){this.name=d;this.layer=c;this.start=f;this.end=g;this.duration=g-f;this.module=a}}}();
